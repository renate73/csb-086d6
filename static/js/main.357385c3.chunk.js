(this.webpackJsonpminimap=this.webpackJsonpminimap||[]).push([[0],{59:function(e,t,r){},66:function(e,t,r){"use strict";r.r(t);var n=r(36),a=r.n(n),c=r(5),o=(r(59),r(20)),s=r(11),i=r(13),u=r(1),f=r(16),l=r(72),v=r(69),h=r(73),j=r(70),m=r(71),p=r(74),b=r(51),d=r(2),O=r(6),x=r(3),g=r(4),y=function(e){Object(x.a)(r,e);var t=Object(g.a)(r);function r(){return Object(d.a)(this,r),t.call(this,{vertexShader:"uniform float scale;\n      uniform float shift;\n      varying vec2 vUv;\n      void main() {\n        vec3 pos = position;\n        pos.x = pos.x + ((sin(uv.y * 3.1415926535897932384626433832795) * shift * 2.0) * 0.125);\n        vUv = uv;\n        gl_Position = projectionMatrix * modelViewMatrix * vec4(pos,1.);\n      }",fragmentShader:"uniform sampler2D tex;\n      uniform float hasTexture;\n      uniform float shift;\n      uniform float scale;\n      uniform vec3 color;\n      uniform float opacity;\n      varying vec2 vUv;\n      void main() {\n        float angle = 0.0;\n        vec2 p = (vUv - vec2(0.5, 0.5)) * (1.0 - scale) + vec2(0.5, 0.5);\n        vec2 offset = 0.0 * vec2(cos(angle), sin(angle));\n        vec4 cr = texture2D(tex, p + offset);\n        vec4 cga = texture2D(tex, p);\n        vec4 cb = texture2D(tex, p - offset);\n        if (hasTexture == 1.0) gl_FragColor = vec4(cr.r, cga.g, cb.b, cga.a);\n        else gl_FragColor = vec4(color, opacity);\n      }",uniforms:{tex:{value:null},hasTexture:{value:0},scale:{value:0},shift:{value:0},opacity:{value:1},color:{value:new u.Color("white")}}})}return Object(O.a)(r,[{key:"scale",get:function(){return this.uniforms.scale.value},set:function(e){this.uniforms.scale.value=e}},{key:"shift",get:function(){return this.uniforms.shift.value},set:function(e){this.uniforms.shift.value=e}},{key:"map",get:function(){return this.uniforms.tex.value},set:function(e){this.uniforms.hasTexture.value=!!e,this.uniforms.tex.value=e}},{key:"color",get:function(){return this.uniforms.color.value}},{key:"opacity",get:function(){return this.uniforms.opacity.value},set:function(e){this.uniforms&&(this.uniforms.opacity.value=e)}}]),r}(u.ShaderMaterial);Object(f.c)({CustomMaterial:y});var w={sections:6,pages:5,zoom:75,ref:Object(c.createRef)(),top:Object(c.createRef)()},M=r(12),S=["children","offset","factor"],U=Object(c.createContext)(0);function P(e){var t=e.children,r=e.offset,n=e.factor,a=Object(o.a)(e,S),i=C(),l=i.offset,v=i.sectionWidth,h=Object(c.useRef)();return r=void 0!==r?r:l,Object(f.d)((function(){var e=h.current.position.x,t=w.top.current;h.current.position.x=u.MathUtils.lerp(e,-t/w.zoom*n,.1)})),Object(M.jsx)(U.Provider,{value:r,children:Object(M.jsx)("group",Object(s.a)(Object(s.a)({},a),{},{position:[v*r*n,0,0],children:Object(M.jsx)("group",{ref:h,children:t})}))})}function C(){var e=w.sections,t=w.pages,r=w.zoom,n=Object(f.f)().size,a=Object(c.useContext)(U),o=n.width,s=n.width/r;return{offset:a,viewportWidth:o,contentMaxWidth:s*(n.width<700?.7:.5),sectionWidth:s*((t-1)/(e-1)),offsetFactor:(a+1)/e}}var R=["color","shift","opacity","args","map"],z=Object(c.forwardRef)((function(e,t){var r=e.color,n=void 0===r?"white":r,a=e.shift,i=void 0===a?100:a,l=e.opacity,v=void 0===l?1:l,h=e.args,j=e.map,m=Object(o.a)(e,R),p=C(),b=p.viewportWidth,d=p.offsetFactor,O=Object(c.useRef)(),x=w.top.current;return Object(f.d)((function(){var e=w.pages,t=w.top;O.current.scale=u.MathUtils.lerp(O.current.scale,d-t.current/((e-1)*b),.1),O.current.shift=u.MathUtils.lerp(O.current.shift,-(t.current-x)/i,.1),x=t.current})),Object(M.jsxs)("mesh",Object(s.a)(Object(s.a)({ref:t},m),{},{children:[Object(M.jsx)("planeGeometry",{args:h}),Object(M.jsx)("customMaterial",{ref:O,color:n,map:j,"map-minFilter":u.LinearFilter,transparent:!0,opacity:v})]}))})),F=r(75),D=r(45),k=r(68),q=r(76),T=r(77),W=r(43),_={byp:{value:0},tex:{type:"t",value:null},time:{type:"f",value:0},factor:{type:"f",value:0},resolution:{type:"v2",value:null}},V="varying vec2 vUv;\n    void main(){  \n      vUv = uv; \n      vec4 modelViewPosition = modelViewMatrix * vec4(position, 1.0);\n      gl_Position = projectionMatrix * modelViewPosition;\n    }",E="uniform int byp; //should we apply the glitch ?\n    uniform float time;\n    uniform float factor;\n    uniform vec2 resolution;\n    uniform sampler2D tex;\n    varying vec2 vUv;\n    void main() {  \n      if (byp<1) {\n        vec2 uv1 = vUv;\n        vec2 uv = gl_FragCoord.xy/resolution.xy;\n        float frequency = 6.0;\n        float amplitude = 0.015 * factor;\n        float x = uv1.y * frequency + time * .7; \n        float y = uv1.x * frequency + time * .3;\n        uv1.x += cos(x+y) * amplitude * cos(y);\n        uv1.y += sin(x-y) * amplitude * cos(y);\n        vec4 rgba = texture2D(tex, uv1);\n        gl_FragColor = rgba;\n      } else {\n        gl_FragColor = texture2D(tex, vUv);\n      }\n    }",A=function(e){Object(x.a)(r,e);var t=Object(g.a)(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:64;return Object(d.a)(this,r),(e=t.call(this)).uniforms=u.UniformsUtils.clone(_),e.uniforms.resolution.value=new u.Vector2(n,n),e.material=new u.ShaderMaterial({uniforms:e.uniforms,vertexShader:V,fragmentShader:E}),e.camera=new u.OrthographicCamera(-1,1,1,-1,0,1),e.scene=new u.Scene,e.quad=new u.Mesh(new u.PlaneBufferGeometry(2,2),null),e.quad.frustumCulled=!1,e.scene.add(e.quad),e.factor=0,e.time=0,e}return Object(O.a)(r,[{key:"render",value:function(e,t,r,n,a){var c=Math.max(0,this.factor);this.uniforms.byp.value=c?0:1,this.uniforms.tex.value=r.texture,this.uniforms.time.value=this.time,this.uniforms.factor.value=this.factor,this.time+=.05,this.quad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),e.render(this.scene,this.camera)):(e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera))}}]),r}(W.a),B={vertexShader:"uniform float scale;\n      uniform float factor;\n      varying vec2 vUv;\n      void main() {\n        vec3 pos = position;\n        pos.x = pos.x + ((sin(uv.y * 3.1415926535897932384626433832795) * factor * 2.0) * 0.125);\n        vUv = uv;\n        gl_Position = projectionMatrix * modelViewMatrix * vec4(pos,1.);\n      }",fragmentShader:"uniform sampler2D tex;\n      uniform float factor;\n      uniform float scale;\n      varying vec2 vUv;\n      void main() {\n        float angle = 0.0;\n        vec2 p = (vUv - vec2(0.5, 0.5)) * (1.0 - scale) + vec2(0.5, 0.5);\n        vec2 offset = factor / 50.0 * vec2(cos(angle), sin(angle));\n        vec4 cr = texture2D(tex, p + offset);\n        vec4 cga = texture2D(tex, p);\n        vec4 cb = texture2D(tex, p - offset);\n        gl_FragColor = vec4(cr.r, cga.g, cb.b, cga.a);\n      }",uniforms:{byp:{value:0},tex:{value:null},scale:{value:0},factor:{value:0},resolution:{value:new u.Vector2(64,64)}}},L=function(e){Object(x.a)(r,e);var t=Object(g.a)(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:64;return Object(d.a)(this,r),(e=t.call(this)).uniforms=u.UniformsUtils.clone(B.uniforms),e.uniforms.resolution.value=new u.Vector2(n,n),e.material=new u.ShaderMaterial({uniforms:e.uniforms,vertexShader:B.vertexShader,fragmentShader:B.fragmentShader}),e.camera=new u.OrthographicCamera(-1,1,1,-1,0,1),e.scene=new u.Scene,e.quad=new u.Mesh(new u.PlaneBufferGeometry(2,2,1,1),null),e.quad.frustumCulled=!1,e.scene.add(e.quad),e.factor=0,e}return Object(O.a)(r,[{key:"render",value:function(e,t,r,n,a){var c=Math.max(0,this.factor);this.uniforms.byp.value=c?0:1,this.uniforms.tex.value=r.texture,this.uniforms.factor.value=this.factor,this.quad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),e.render(this.scene,this.camera)):(e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera))}}]),r}(W.a);function G(e){var t=e.children,r=Object(c.useState)((function(){return new u.Scene})),n=Object(i.a)(r,1)[0],a=Object(c.useRef)(),o=Object(c.useRef)(),s=Object(c.useRef)(),l=Object(c.useRef)(),v=Object(f.f)(),h=v.gl,j=v.size,m=v.camera,p=w.top.current;return Object(c.useEffect)((function(){a.current.setSize(j.width,j.height)}),[j]),Object(f.d)((function(){var e=w.top;o.current.factor=u.MathUtils.lerp(o.current.factor,(e.current-p)/-30,.1),l.current.strength=u.MathUtils.lerp(l.current.strength,Math.abs((e.current-p)/200),.1),s.current.factor=u.MathUtils.lerp(s.current.factor,Math.abs((e.current-p)/30),.1),p=e.current,h.autoClear=!0,a.current.render()}),1),Object(f.b)(Object(M.jsxs)(M.Fragment,{children:[Object(M.jsxs)("effectComposer",{ref:a,args:[h],children:[Object(M.jsx)("renderPass",{attachArray:"passes",scene:n,camera:m}),Object(M.jsx)("unrealBloomPass",{attachArray:"passes",ref:l,args:[void 0,0,1,0]}),Object(M.jsx)("effectPass",{attachArray:"passes",ref:o}),Object(M.jsx)("waterPass",{attachArray:"passes",ref:s})]}),t]}),n)}Object(f.c)({EffectComposer:F.a,ShaderPass:D.a,RenderPass:k.a,WaterPass:A,UnrealBloomPass:q.a,FilmPass:T.a,EffectPass:L});var X=["scale"];function I(e){var t=e.children,r=Object(c.useState)((function(){return new u.Scene})),n=Object(i.a)(r,1)[0],a=Object(f.f)(),o=a.gl,s=a.camera;return Object(f.d)((function(){return o.autoClear=!1,o.clearDepth(),o.render(n,s)}),2),Object(f.b)(t,n)}function J(){var e=Object(c.useRef)(),t=Object(c.useState)(!1),r=Object(i.a)(t,2),n=r[0],a=r[1],o=Object(c.useState)(!1),l=Object(i.a)(o,2),v=l[0],h=l[1],j=C().sectionWidth;Object(c.useEffect)((function(){document.body.style.cursor=v?"grab":"auto"}),[v]),Object(f.d)((function(t){var r=t.camera;e.current.rotation.z=u.MathUtils.lerp(e.current.rotation.z,w.top.current/w.zoom/j/w.pages*-Math.PI*2,.1);var a=u.MathUtils.lerp(e.current.scale.x,n||v?2:.75,.1);e.current.scale.set(a,a,a),r.zoom=u.MathUtils.lerp(r.zoom,n||v?40:w.zoom,.1),r.updateProjectionMatrix()}));var m=Object(b.a)((function(e){var t=Object(i.a)(e.movement,1)[0],r=(e.first,e.last);return a(!r),w.ref.scrollLeft=2*t*w.pages}),{initial:function(){return[.5*w.ref.scrollLeft/w.pages]}});return Object(M.jsx)("group",{ref:e,position:[0,0,2],children:Object(M.jsx)(Y,Object(s.a)(Object(s.a)({},m()),{},{onPointerOver:function(e){return e.stopPropagation(),h(!0)},onPointerOut:function(){return h(!1)}}))})}function Y(e){var t=e.scale,r=Object(o.a)(e,X);return Object(M.jsxs)("group",{scale:t,children:[Object(M.jsx)(l.a,{points:[-.5,.5,0,.5,.5,0,.5,-.5,0,-.5,-.5,0,-.5,.5,0],color:"white",linewidth:1,position:[0,0,0]}),Object(M.jsxs)("mesh",Object(s.a)(Object(s.a)({},r),{},{raycast:v.a,children:[Object(M.jsx)("planeGeometry",{}),Object(M.jsx)("meshBasicMaterial",{transparent:!0,opacity:.1})]}))]})}function H(){var e=Object(c.useState)(!1),t=Object(i.a)(e,2),r=t[0],n=t[1],a=C(),o=a.offset,s=a.sectionWidth;return Object(c.useEffect)((function(){document.body.style.cursor=r?"pointer":"auto"}),[r]),Object(M.jsx)(Y,{scale:.15,onPointerOver:function(){return n(!0)},onPointerOut:function(){return n(!1)},onClick:function(){return w.ref.scrollLeft=o*s*w.zoom}})}function K(){return new Array(6).fill().map((function(e,t){return Object(M.jsx)(P,{factor:1/w.sections/2,offset:t,children:Object(M.jsx)(H,{})},t)}))}function N(e){var t=e.img,r=e.index,n=Object(c.useRef)(),a=C(),o=a.contentMaxWidth,s=a.viewportWidth,i=a.offsetFactor;return Object(f.d)((function(){var e=w.top.current/(s*w.pages-s)+1/w.pages/2,t=1-(i-e)*(i>e?1:-1);n.current.scale.setScalar(t)})),Object(M.jsxs)("group",{ref:n,children:[Object(M.jsx)(z,{map:t,args:[1,1,32,32],shift:100,aspect:1.5,scale:[o,o/1.5,1],frustumCulled:!1}),Object(M.jsxs)(h.a,{anchorX:"left",position:[-o/2,-o/1.5/2-.25,0],scale:1.5,color:"white",children:["0",r]}),Object(M.jsx)(j.a,{scale:[1.2*o,1,1],rotation:[.75,0,0],position:[0,-o/2,0]})]})}function Q(){return Object(m.a)(["/01.jpg","/ph1.jpg","/00.jpg","/03.jpg","/04.jpg","/05.jpg"]).map((function(e,t){return Object(M.jsx)(P,{factor:1,offset:t,children:Object(M.jsx)(N,{index:t,img:e},t)},t)}))}function Z(){var e=Object(c.useRef)(),t=function(e){return w.top.current=e.target.scrollLeft};return Object(c.useEffect)((function(){t({target:w.ref=e.current})}),[]),Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(f.a,{orthographic:!0,dpr:[1,1.5],mode:"concurrent",camera:{zoom:1,position:[0,0,500]},raycaster:{computeOffsets:function(t){var r=t.offsetX,n=t.offsetY;return{offsetX:r-e.current.scrollLeft,offsetY:n}}},onCreated:function(t){return t.events.connect(e.current)},children:Object(M.jsx)(G,{children:Object(M.jsxs)(c.Suspense,{fallback:null,children:[Object(M.jsx)(Q,{}),Object(M.jsxs)(I,{children:[Object(M.jsx)(K,{}),Object(M.jsx)(J,{})]})]})})}),Object(M.jsx)("div",{class:"scrollArea",ref:e,onScroll:t,children:Object(M.jsx)("div",{style:{height:"100vh",width:"".concat(100*w.pages,"vw")}})}),Object(M.jsx)(p.a,{})]})}a.a.render(Object(M.jsx)(Z,{}),document.getElementById("root"))}},[[66,1,2]]]);
//# sourceMappingURL=main.357385c3.chunk.js.map